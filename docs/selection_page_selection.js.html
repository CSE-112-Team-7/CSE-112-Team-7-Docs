<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: selection_page/selection.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: selection_page/selection.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import playBgMusic from "/utils/playmusic/script";

window.addEventListener("DOMContentLoaded", init);

const backgroundMusic = document.getElementById("background-music");
const selectionButtons = document.querySelectorAll("main button");
const icon = document.querySelector("img");
const startButton = document.querySelector("a");
const nextButton = document.querySelector(".button");

let selectedButton = null;

/**
 * Play background music, all function calls in selection page trace back here
 */
function init() {
  playBgMusic(backgroundMusic, true);

  // clear local storage from previous selection
  localStorage.removeItem("questionType");
  localStorage.removeItem("chosenConstellation");
  selectionButtons.forEach(function (element) {
    element.addEventListener("click", handleSelection);
  });

  nextButton.addEventListener("click", () => {
    localStorage.setItem("musicPlayTime", backgroundMusic.currentTime);
  });
}

/**
 * Handle selection of categories to make sure only one category
 * is selected at one time, update icon image accordingly, and
 * store the category into local storage
 * @param {Element} element category button
 */
function handleSelection(element) {
  let clickedButton = element.target;

  let questionType = clickedButton.innerHTML;
  // update icon image based on the selected category
  if (questionType === "RELATIONSHIP") {
    icon.src = "/assets/icons/rel/img";
    icon.alt = "relationship icon";
  } else if (questionType === "HEALTH") {
    icon.src = "/assets/icons/health/img";
    icon.alt = "health icon";
  } else if (questionType === "CAREER") {
    icon.src = "/assets/icons/career/img";
    icon.alt = "career icon";
  } else if (questionType === "HOROSCOPE") {
    icon.src = "/assets/icons/daily_scope/img";
    icon.alt = "horoscope icon";
  }

  if (selectedButton === null) {
    // if no button is previously selected, select the clicked button
    clickedButton.style.backgroundColor = "var(--button-hover-background)";

    localStorage.setItem("questionType", questionType);
    selectedButton = clickedButton;

    startButton.style.display = "block";
    icon.style.display = "block";
  } else if (clickedButton != selectedButton) {
    // unselect the previously selected button, select the clicked button
    selectedButton.style.backgroundColor = "var(--button-background)";

    clickedButton.style.backgroundColor = "var(--button-hover-background)";

    localStorage.setItem("questionType", questionType);
    selectedButton = clickedButton;
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Background.html">Background</a></li><li><a href="BackgroundStar.html">BackgroundStar</a></li><li><a href="Constellation.html">Constellation</a></li><li><a href="ConstellationStar.html">ConstellationStar</a></li></ul><h3>Global</h3><ul><li><a href="global.html#animate">animate</a></li><li><a href="global.html#animateText">animateText</a></li><li><a href="global.html#backgroundMusic">backgroundMusic</a></li><li><a href="global.html#confirmPassword">confirmPassword</a></li><li><a href="global.html#constellationList">constellationList</a></li><li><a href="global.html#constellationsPath">constellationsPath</a></li><li><a href="global.html#createDateCard">createDateCard</a></li><li><a href="global.html#displayText">displayText</a></li><li><a href="global.html#fetchResponses">fetchResponses</a></li><li><a href="global.html#formatJSON">formatJSON</a></li><li><a href="global.html#getBlankButton">getBlankButton</a></li><li><a href="global.html#getCareerButton">getCareerButton</a></li><li><a href="global.html#getHealthButton">getHealthButton</a></li><li><a href="global.html#getHoroscopeButton">getHoroscopeButton</a></li><li><a href="global.html#getRelationshipButton">getRelationshipButton</a></li><li><a href="global.html#getStarPath">getStarPath</a></li><li><a href="global.html#handleClickCanvas">handleClickCanvas</a></li><li><a href="global.html#handleSelection">handleSelection</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#initializeConstellation">initializeConstellation</a></li><li><a href="global.html#loadCards">loadCards</a></li><li><a href="global.html#loadJsonData">loadJsonData</a></li><li><a href="global.html#loginStatus">loginStatus</a></li><li><a href="global.html#makePostRequest">makePostRequest</a></li><li><a href="global.html#openPopup">openPopup</a></li><li><a href="global.html#redirectToPage">redirectToPage</a></li><li><a href="global.html#req">req</a></li><li><a href="global.html#setCanvasPanning">setCanvasPanning</a></li><li><a href="global.html#setRatio">setRatio</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Jun 13 2024 17:13:53 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
